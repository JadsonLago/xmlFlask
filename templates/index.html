{% extends "base.html" %} {% block content %}

<div class="container">
    <h1>Notas Fiscais</h1>

    <!-- Formulário para upload de arquivos XML -->
    <h2>Upload de Arquivos XML</h2>
    <form action="/upload" method="POST" enctype="multipart/form-data">
        <input type="file" name="xml_files" multiple />
        <button type="submit">Fazer Upload</button>
    </form>
</div>
<div class="container">
    <!-- Tabela interativa de NFes com DataTables -->
    <h2>Notas Fiscais Salvas</h2>
    <table id="nfeTable" class="display">
        <thead>
            <tr>
                <th>Número da Nota</th>
                <th>Emitente</th>
                <th>Data de Emissão</th>
                <th>Valor Total</th>
            </tr>
        </thead>
        <tbody>
            {% for nfe in nfes %}
            <tr>
                <td>{{ nfe.n_nota }}</td>
                <td>{{ nfe.emitente.emit_nome }}</td>
                <td>{{ nfe.data_emit }}</td>
                <td>{{ nfe.valor_total}}</td>
            </tr>
            {% endfor %}
        </tbody>
        <!-- Rodapé para exibir o total -->
        <tfoot>
            <tr>
                <th colspan="2">Total:</th>
                <th id="total_value"></th>
            </tr>
        </tfoot>
    </table>
</div>

{% endblock %}
